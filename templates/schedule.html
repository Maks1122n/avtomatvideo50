<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ - MediaFlux Hub</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="logo">
                <i class="fas fa-video"></i>
                <span>MediaFlux Hub</span>
            </div>
            
            <ul class="menu">
                <li class="menu-item">
                    <a href="/">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/accounts">
                        <i class="fas fa-users"></i>
                        <span>–ê–∫–∫–∞—É–Ω—Ç—ã</span>
                        <span class="badge">3</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/content">
                        <i class="fas fa-folder"></i>
                        <span>–ö–æ–Ω—Ç–µ–Ω—Ç</span>
                        <span class="badge">156</span>
                    </a>
                </li>
                <li class="menu-item active">
                    <a href="/schedule">
                        <i class="fas fa-calendar-alt"></i>
                        <span>–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/analytics">
                        <i class="fas fa-chart-line"></i>
                        <span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/proxies">
                        <i class="fas fa-shield-alt"></i>
                        <span>–ü—Ä–æ–∫—Å–∏</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/settings">
                        <i class="fas fa-cog"></i>
                        <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1>–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–π</h1>
                    <span class="breadcrumb">–ì–ª–∞–≤–Ω–∞—è / –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫</span>
                </div>
                <div class="header-right">
                    <button class="btn btn-primary" onclick="generateAutoSchedule()">
                        <i class="fas fa-magic"></i>
                        –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                    </button>
                    <div class="user-profile">
                        <i class="fas fa-user"></i>
                        <span>Administrator</span>
                    </div>
                </div>
            </header>

            <!-- Schedule Creation Form -->
            <div class="content">
                <div class="content-section">
                    <div class="form-container">
                        <h2>–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–π</h2>
                        
                        <form id="scheduleForm" class="schedule-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="schedule_name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</label>
                                    <input type="text" id="schedule_name" name="schedule_name" placeholder="–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="period">–ü–µ—Ä–∏–æ–¥ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</label>
                                    <select id="period" name="period">
                                        <option value="week">–ù–∞ –Ω–µ–¥–µ–ª—é (7 –¥–Ω–µ–π)</option>
                                        <option value="month">–ù–∞ –º–µ—Å—è—Ü (30 –¥–Ω–µ–π)</option>
                                        <option value="custom">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø–µ—Ä–∏–æ–¥</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="posts_per_day">–ü—É–±–ª–∏–∫–∞—Ü–∏–π –≤ –¥–µ–Ω—å</label>
                                    <input type="number" id="posts_per_day" name="posts_per_day" min="1" max="12" value="3">
                                    <small class="form-help">–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 3-5 –ø–æ—Å—Ç–æ–≤ –≤ –¥–µ–Ω—å</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="content_category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞</label>
                                    <select id="content_category" name="content_category">
                                        <option value="mixed">–°–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç</option>
                                        <option value="motivation">üî• –ú–æ—Ç–∏–≤–∞—Ü–∏—è</option>
                                        <option value="lifestyle">‚ú® –õ–∞–π—Ñ—Å—Ç–∞–π–ª</option>
                                        <option value="business">üíº –ë–∏–∑–Ω–µ—Å</option>
                                        <option value="entertainment">üéâ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="start_time">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–π</label>
                                    <input type="time" id="start_time" name="start_time" value="09:00">
                                </div>
                                
                                <div class="form-group">
                                    <label for="end_time">–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π</label>
                                    <input type="time" id="end_time" name="end_time" value="22:00">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>–í—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç—ã –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</label>
                                <div class="accounts-selection" id="accountsSelection">
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="accounts" value="demo_fashion" checked>
                                        <span class="checkmark"></span>
                                        <div class="account-item">
                                            <i class="fas fa-user"></i>
                                            <span>@demo_fashion</span>
                                            <small>12.5K –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</small>
                                        </div>
                                    </label>
                                    
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="accounts" value="demo_lifestyle" checked>
                                        <span class="checkmark"></span>
                                        <div class="account-item">
                                            <i class="fas fa-camera"></i>
                                            <span>@demo_lifestyle</span>
                                            <small>8.9K –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</small>
                                        </div>
                                    </label>
                                    
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="accounts" value="demo_business">
                                        <span class="checkmark"></span>
                                        <div class="account-item">
                                            <i class="fas fa-briefcase"></i>
                                            <span>@demo_business</span>
                                            <small>24.1K –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)</small>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="posting_strategy">–°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</label>
                                <select id="posting_strategy" name="posting_strategy">
                                    <option value="even">–†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</option>
                                    <option value="peak_hours">–í —á–∞—Å—ã –ø–∏–∫–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</option>
                                    <option value="random">–°–ª—É—á–∞–π–Ω–æ–µ –≤—Ä–µ–º—è (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞)</option>
                                    <option value="optimal">–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏</option>
                                </select>
                                <small class="form-help">–í–ª–∏—è–µ—Ç –Ω–∞ –≤—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è</small>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" onclick="previewSchedule()">
                                    <i class="fas fa-eye"></i>
                                    –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-check"></i>
                                    –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Current Schedule -->
                <div class="content-section">
                    <div class="section-header">
                        <h2>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</h2>
                        <div class="section-actions">
                            <div class="filter-tabs">
                                <button class="filter-tab active" data-filter="all">–í—Å–µ</button>
                                <button class="filter-tab" data-filter="pending">–û–∂–∏–¥–∞—é—Ç</button>
                                <button class="filter-tab" data-filter="scheduled">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã</button>
                                <button class="filter-tab" data-filter="completed">–í—ã–ø–æ–ª–Ω–µ–Ω—ã</button>
                                <button class="filter-tab" data-filter="failed">–û—à–∏–±–∫–∏</button>
                            </div>
                            <button class="btn btn-secondary" onclick="refreshTasks()">
                                <i class="fas fa-sync-alt"></i>
                                –û–±–Ω–æ–≤–∏—Ç—å
                            </button>
                        </div>
                    </div>

                    <div class="tasks-container">
                        <div class="tasks-list" id="tasksList">
                            <!-- Demo task 1 -->
                            <div class="task-item" data-status="scheduled">
                                <div class="task-status-indicator status-scheduled"></div>
                                <div class="task-content">
                                    <div class="task-info">
                                        <div class="task-header">
                                            <h4>motivation/success_mindset.mp4</h4>
                                            <span class="task-account">@demo_fashion</span>
                                        </div>
                                        <div class="task-meta">
                                            <span class="task-time">
                                                <i class="fas fa-clock"></i>
                                                –°–µ–≥–æ–¥–Ω—è –≤ 14:30
                                            </span>
                                            <span class="task-category">
                                                <i class="fas fa-tag"></i>
                                                –ú–æ—Ç–∏–≤–∞—Ü–∏—è
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="task-actions">
                                        <span class="status-badge status-scheduled">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</span>
                                        <button class="btn btn-small btn-secondary" onclick="editTask(1)">
                                            <i class="fas fa-edit"></i>
                                            –ò–∑–º–µ–Ω–∏—Ç—å
                                        </button>
                                        <button class="btn btn-small btn-danger" onclick="cancelTask(1)">
                                            <i class="fas fa-times"></i>
                                            –û—Ç–º–µ–Ω–∏—Ç—å
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Demo task 2 -->
                            <div class="task-item" data-status="pending">
                                <div class="task-status-indicator status-pending"></div>
                                <div class="task-content">
                                    <div class="task-info">
                                        <div class="task-header">
                                            <h4>lifestyle/morning_routine_tips.mp4</h4>
                                            <span class="task-account">@demo_lifestyle</span>
                                        </div>
                                        <div class="task-meta">
                                            <span class="task-time">
                                                <i class="fas fa-clock"></i>
                                                –°–µ–≥–æ–¥–Ω—è –≤ 16:45
                                            </span>
                                            <span class="task-category">
                                                <i class="fas fa-tag"></i>
                                                –õ–∞–π—Ñ—Å—Ç–∞–π–ª
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="task-actions">
                                        <span class="status-badge status-pending">–û–∂–∏–¥–∞–µ—Ç</span>
                                        <button class="btn btn-small btn-secondary" onclick="editTask(2)">
                                            <i class="fas fa-edit"></i>
                                            –ò–∑–º–µ–Ω–∏—Ç—å
                                        </button>
                                        <button class="btn btn-small btn-success" onclick="approveTask(2)">
                                            <i class="fas fa-check"></i>
                                            –û–¥–æ–±—Ä–∏—Ç—å
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Demo task 3 -->
                            <div class="task-item" data-status="completed">
                                <div class="task-status-indicator status-completed"></div>
                                <div class="task-content">
                                    <div class="task-info">
                                        <div class="task-header">
                                            <h4>business/entrepreneur_tips.mp4</h4>
                                            <span class="task-account">@demo_fashion</span>
                                        </div>
                                        <div class="task-meta">
                                            <span class="task-time">
                                                <i class="fas fa-clock"></i>
                                                –°–µ–≥–æ–¥–Ω—è –≤ 11:15
                                            </span>
                                            <span class="task-category">
                                                <i class="fas fa-tag"></i>
                                                –ë–∏–∑–Ω–µ—Å
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="task-actions">
                                        <span class="status-badge status-completed">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                                        <button class="btn btn-small btn-secondary" onclick="viewResults(3)">
                                            <i class="fas fa-chart-line"></i>
                                            –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Demo task 4 -->
                            <div class="task-item" data-status="scheduled">
                                <div class="task-status-indicator status-scheduled"></div>
                                <div class="task-content">
                                    <div class="task-info">
                                        <div class="task-header">
                                            <h4>motivation/daily_inspiration.mp4</h4>
                                            <span class="task-account">@demo_lifestyle</span>
                                        </div>
                                        <div class="task-meta">
                                            <span class="task-time">
                                                <i class="fas fa-clock"></i>
                                                –ó–∞–≤—Ç—Ä–∞ –≤ 10:00
                                            </span>
                                            <span class="task-category">
                                                <i class="fas fa-tag"></i>
                                                –ú–æ—Ç–∏–≤–∞—Ü–∏—è
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="task-actions">
                                        <span class="status-badge status-scheduled">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</span>
                                        <button class="btn btn-small btn-secondary" onclick="editTask(4)">
                                            <i class="fas fa-edit"></i>
                                            –ò–∑–º–µ–Ω–∏—Ç—å
                                        </button>
                                        <button class="btn btn-small btn-danger" onclick="cancelTask(4)">
                                            <i class="fas fa-times"></i>
                                            –û—Ç–º–µ–Ω–∏—Ç—å
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Schedule Statistics -->
                <div class="content-section">
                    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-info">
                                <h3>45</h3>
                                <p>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3>12</h3>
                                <p>–û–∂–∏–¥–∞—é—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-info">
                                <h3>28</h3>
                                <p>–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ —Å–µ–≥–æ–¥–Ω—è</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="stat-info">
                                <h3>96.5%</h3>
                                <p>–£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏–π</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <script src="/static/js/dashboard.js"></script>
    <script>
        console.log('üìÖ Schedule page loaded');

        // –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
        document.getElementById('scheduleForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const scheduleData = Object.fromEntries(formData);
            
            // –°–æ–±—Ä–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã
            const selectedAccounts = [];
            document.querySelectorAll('input[name="accounts"]:checked').forEach(cb => {
                selectedAccounts.push(cb.value);
            });
            scheduleData.accounts = selectedAccounts;

            console.log('üìÖ Creating schedule:', scheduleData);

            try {
                const response = await fetch('/api/tasks/generate-schedule', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(scheduleData)
                });

                const result = await response.json();

                if (result.success) {
                    alert(`‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ "${scheduleData.schedule_name}" —Å–æ–∑–¥–∞–Ω–æ!\nüìã –°–æ–∑–¥–∞–Ω–æ –∑–∞–¥–∞—á: ${result.tasks_created}\nüìÖ –ü–µ—Ä–∏–æ–¥: ${scheduleData.period}`);
                    loadTasks();
                    this.reset();
                } else {
                    alert('‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è: ' + result.message);
                }
            } catch (error) {
                console.error('Schedule creation error:', error);
                alert('‚ùå –û—à–∏–±–∫–∞: ' + error.message);
            }
        });

        // –ë—ã—Å—Ç—Ä–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        async function generateAutoSchedule() {
            const confirmed = confirm('ü§ñ –°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ?\n\nüìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:\n‚Ä¢ –ü–µ—Ä–∏–æ–¥: 7 –¥–Ω–µ–π\n‚Ä¢ –ü—É–±–ª–∏–∫–∞—Ü–∏–π –≤ –¥–µ–Ω—å: 3\n‚Ä¢ –í—Ä–µ–º—è: 09:00 - 22:00\n‚Ä¢ –ê–∫–∫–∞—É–Ω—Ç—ã: –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ');
            
            if (confirmed) {
                console.log('ü§ñ Generating auto schedule...');
                
                try {
                    const response = await fetch('/api/tasks/generate-schedule', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({
                            schedule_name: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ',
                            period: 'week',
                            posts_per_day: 3,
                            start_time: '09:00',
                            end_time: '22:00',
                            content_category: 'mixed',
                            posting_strategy: 'optimal',
                            accounts: ['demo_fashion', 'demo_lifestyle']
                        })
                    });

                    const result = await response.json();

                    if (result.success) {
                        alert(`ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ!\n‚úÖ –°–æ–∑–¥–∞–Ω–æ –∑–∞–¥–∞—á: ${result.tasks_created}\nüìà –ü—É–±–ª–∏–∫–∞—Ü–∏–π –≤ –¥–µ–Ω—å: 3\nüïí –í—Ä–µ–º—è: 09:00 - 22:00`);
                        loadTasks();
                    } else {
                        alert('‚ùå –û—à–∏–±–∫–∞: ' + result.message);
                    }
                } catch (error) {
                    console.error('Auto schedule error:', error);
                    alert('‚ùå –û—à–∏–±–∫–∞: ' + error.message);
                }
            }
        }

        // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
        function previewSchedule() {
            const formData = new FormData(document.getElementById('scheduleForm'));
            const scheduleData = Object.fromEntries(formData);
            
            const selectedAccounts = [];
            document.querySelectorAll('input[name="accounts"]:checked').forEach(cb => {
                selectedAccounts.push(cb.value);
            });

            console.log('üëÅÔ∏è Preview schedule:', scheduleData);
            
            alert(`üëÅÔ∏è –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:\n\nüìã –ù–∞–∑–≤–∞–Ω–∏–µ: ${scheduleData.schedule_name}\nüìÖ –ü–µ—Ä–∏–æ–¥: ${scheduleData.period}\nüìä –ü—É–±–ª–∏–∫–∞—Ü–∏–π –≤ –¥–µ–Ω—å: ${scheduleData.posts_per_day}\nüïí –í—Ä–µ–º—è: ${scheduleData.start_time} - ${scheduleData.end_time}\nüë• –ê–∫–∫–∞—É–Ω—Ç—ã: ${selectedAccounts.join(', ')}\nüì± –°—Ç—Ä–∞—Ç–µ–≥–∏—è: ${scheduleData.posting_strategy}`);
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏
        async function loadTasks() {
            try {
                console.log('üìã Loading tasks...');
                const response = await fetch('/api/tasks/');
                const tasks = await response.json();
                
                console.log('‚úÖ Loaded tasks:', tasks.length);
                // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á
            } catch (error) {
                console.error('‚ùå Error loading tasks:', error);
            }
        }

        async function refreshTasks() {
            console.log('üîÑ Refreshing tasks...');
            await loadTasks();
        }

        function editTask(taskId) {
            console.log('‚úèÔ∏è Editing task:', taskId);
            alert(`‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ #${taskId}\n(–í –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)`);
        }

        function cancelTask(taskId) {
            if (confirm(`‚ùå –û—Ç–º–µ–Ω–∏—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é –∑–∞–¥–∞—á–∏ #${taskId}?`)) {
                console.log('‚ùå Cancelling task:', taskId);
                alert(`‚ùå –ó–∞–¥–∞—á–∞ #${taskId} –æ—Ç–º–µ–Ω–µ–Ω–∞`);
            }
        }

        function approveTask(taskId) {
            console.log('‚úÖ Approving task:', taskId);
            alert(`‚úÖ –ó–∞–¥–∞—á–∞ #${taskId} –æ–¥–æ–±—Ä–µ–Ω–∞ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏`);
        }

        function viewResults(taskId) {
            console.log('üìä Viewing results for task:', taskId);
            alert(`üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ #${taskId}:\n\nüëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä—ã: 1,234\n‚ù§Ô∏è –õ–∞–π–∫–∏: 156\nüí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: 23\nüîÑ –†–µ–ø–æ—Å—Ç—ã: 12\nüìà –û—Ö–≤–∞—Ç: 2,345`);
        }

        // –§–∏–ª—å—Ç—Ä—ã –∑–∞–¥–∞—á
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                const filter = this.dataset.filter;
                console.log('üîç Filtering tasks by:', filter);
                filterTasks(filter);
            });
        });

        function filterTasks(filter) {
            const tasks = document.querySelectorAll('.task-item');
            
            tasks.forEach(task => {
                if (filter === 'all' || task.dataset.status === filter) {
                    task.style.display = 'block';
                } else {
                    task.style.display = 'none';
                }
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Schedule page initialized');
            loadTasks();
        });
    </script>
</body>
</html> 