<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaFlux Hub - Instagram Reels Automation</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-video"></i>
                    <h2>MediaFlux Hub</h2>
                </div>
            </div>
            
            <div class="sidebar-menu">
                <a href="#dashboard" class="menu-item active" data-page="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#accounts" class="menu-item" data-page="accounts">
                    <i class="fas fa-users"></i>
                    <span>Аккаунты</span>
                    <span class="badge" id="accounts-count">0</span>
                </a>
                <a href="#content" class="menu-item" data-page="content">
                    <i class="fas fa-folder-open"></i>
                    <span>Контент</span>
                    <span class="badge" id="content-count">0</span>
                </a>
                <a href="#scheduler" class="menu-item" data-page="scheduler">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Планировщик</span>
                </a>
                <a href="#analytics" class="menu-item" data-page="analytics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Аналитика</span>
                </a>
                <a href="#proxies" class="menu-item" data-page="proxies">
                    <i class="fas fa-shield-alt"></i>
                    <span>Прокси</span>
                    <span class="badge" id="proxies-count">0</span>
                </a>
                <a href="#settings" class="menu-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Настройки</span>
                </a>
            </div>
            
            <div class="sidebar-footer">
                <div class="system-status">
                    <div class="status-indicator" id="system-status">
                        <span class="status-dot online"></span>
                        <span>Online</span>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1 id="page-title">Dashboard</h1>
                    <span class="breadcrumb">Главная / Dashboard</span>
                </div>
                <div class="header-right">
                    <button class="btn btn-primary" id="start-automation">
                        <i class="fas fa-play"></i>
                        Запустить автоматизацию
                    </button>
                    <div class="user-profile">
                        <i class="fas fa-user"></i>
                        <span>Administrator</span>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="content" id="dashboard-content">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-accounts">0</h3>
                            <p>Активных аккаунтов</p>
                            <span class="stat-change positive">+5 за сегодня</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-posts">0</h3>
                            <p>Опубликовано сегодня</p>
                            <span class="stat-change positive">+12 за сегодня</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="scheduled-posts">0</h3>
                            <p>Запланировано</p>
                            <span class="stat-change">На завтра</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-views">0</h3>
                            <p>Просмотров</p>
                            <span class="stat-change positive">+2.5K за сегодня</span>
                        </div>
                    </div>
                </div>

                <!-- Action Cards -->
                <div class="action-grid">
                    <div class="action-card">
                        <div class="action-header">
                            <h3>Быстрые действия</h3>
                        </div>
                        <div class="action-buttons">
                            <button class="action-btn" id="add-account">
                                <i class="fas fa-plus"></i>
                                <span>Добавить аккаунт</span>
                            </button>
                            <button class="action-btn" id="upload-content">
                                <i class="fas fa-upload"></i>
                                <span>Загрузить контент</span>
                            </button>
                            <button class="action-btn" id="create-schedule">
                                <i class="fas fa-calendar-plus"></i>
                                <span>Создать расписание</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="activity-card">
                        <div class="activity-header">
                            <h3>Активность системы</h3>
                            <button class="refresh-btn" id="refresh-activity">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div class="activity-list" id="activity-list">
                            <div class="activity-item">
                                <div class="activity-icon success">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="activity-content">
                                    <p>Публикация в @account1 успешно завершена</p>
                                    <small>2 минуты назад</small>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon info">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="activity-content">
                                    <p>Запланирована публикация на 14:30</p>
                                    <small>5 минут назад</small>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="activity-content">
                                    <p>Прокси server1 требует проверки</p>
                                    <small>10 минут назад</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-section">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Статистика публикаций</h3>
                            <select class="chart-filter">
                                <option value="7d">7 дней</option>
                                <option value="30d">30 дней</option>
                                <option value="90d">90 дней</option>
                            </select>
                        </div>
                        <div class="chart-content">
                            <canvas id="postsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other Page Contents (hidden by default) -->
            <div class="content hidden" id="accounts-content">
                <h2>Управление аккаунтами</h2>
                <p>Здесь будет интерфейс управления Instagram аккаунтами</p>
            </div>

            <div class="content hidden" id="content-content">
                <h2>Управление контентом</h2>
                <p>Здесь будет интерфейс управления видео контентом</p>
            </div>

            <div class="content hidden" id="scheduler-content">
                <h2>Планировщик публикаций</h2>
                <p>Здесь будет календарь и настройки расписания</p>
            </div>

            <div class="content hidden" id="analytics-content">
                <h2>Аналитика и отчеты</h2>
                <p>Здесь будут детальные графики и статистика</p>
            </div>

            <div class="content hidden" id="proxies-content">
                <h2>Управление прокси</h2>
                <p>Здесь будет интерфейс настройки прокси серверов</p>
            </div>

            <div class="content hidden" id="settings-content">
                <h2>Настройки системы</h2>
                <p>Здесь будут общие настройки MediaFlux Hub</p>
            </div>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Загрузка...</p>
        </div>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" id="notification-container"></div>

    <!-- JavaScript -->
    <script src="/static/js/dashboard.js"></script>
    
    <!-- Debug script для отладки на production -->
    <script>
        console.log("🔍 MediaFlux Hub Debug Info:");
        console.log("📄 HTML loaded");
        console.log("🎯 Start automation button:", document.getElementById('start-automation'));
        console.log("➕ Add account button:", document.getElementById('add-account'));
        console.log("📁 Upload content button:", document.getElementById('upload-content'));
        console.log("📅 Create schedule button:", document.getElementById('create-schedule'));
        
        // Проверяем что JavaScript файл загрузился
        if (typeof MediaFluxDashboard !== 'undefined') {
            console.log("✅ Dashboard JavaScript loaded successfully");
        } else {
            console.error("❌ Dashboard JavaScript failed to load");
        }
        
        // Проверяем API endpoints
        fetch('/health')
            .then(response => response.json())
            .then(data => console.log("✅ Health check API:", data))
            .catch(error => console.error("❌ Health check API failed:", error));
            
        fetch('/debug')
            .then(response => response.json())
            .then(data => console.log("🔍 Debug info:", data))
            .catch(error => console.error("❌ Debug API failed:", error));
    </script>
</body>
</html> 